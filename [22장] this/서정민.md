22ìž¥ this

## this í‚¤ì›Œë“œ
> **_ê°ì²´_**  
> ìƒíƒœ(`state`)ë¥¼ ë‚˜íƒ€ë‚´ëŠ” **í”„ë¡œí¼í‹°**ì™€ í–‰ë™(`behavior`)ë¥¼ ë‚˜íƒ€ë‚´ëŠ” **ë©”ì„œë“œ**ë¡œ êµ¬ì„±ëœ ë³µí•©ì ì¸ ìžë£Œêµ¬ì¡°

ë™ìž‘ì„ ë‚˜íƒ€ë‚´ëŠ” ë©”ì„œë“œëŠ” ìžì‹ ì´ ì†í•œ ê°ì²´ì˜ ìƒíƒœ, ì¦‰ í”„ë¡œí¼í‹°ë¥¼ ì°¸ì¡°í•˜ê³  ë³€ê²½í•  ìˆ˜ ìžˆì–´ì•¼ í•œë‹¤. ì´ ë•Œ ìžì‹ ì´ ì†í•œ ê°ì²´ë¥¼ ê°€ë¦¬í‚¤ëŠ” ì‹ë³„ìžë¥¼ ì°¸ì¡°í•  ìˆ˜ ìžˆì–´ì•¼ í•˜ëŠ”ë°, ì´ ë•Œ `this` í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•œë‹¤.
```javascript
const circle = {
  // í”„ë¡œí¼í‹°: ê°ì²´ ê³ ìœ ì˜ ìƒíƒœ ë°ì´í„°
  radius: 5,
  // ë©”ì„œë“œ: ìƒíƒœ ë°ì´í„°ë¥¼ ì°¸ì¡°í•˜ê³  ì¡°ìž‘í•˜ëŠ” ë™ìž‘
  getDiameter() {
    // ì´ ë©”ì„œë“œê°€ ìžì‹ ì´ ì†í•œ ê°ì²´ì˜ í”„ë¡œí¼í‹°ë‚˜ ë‹¤ë¥¸ ë©”ì„œë“œë¥¼ ì°¸ì¡°í•˜ë ¤ë©´
    // ìžì‹ ì´ ì†í•œ ê°ì²´ì¸ circleì„ ì°¸ì¡°í•  ìˆ˜ ìžˆì–´ì•¼ í•œë‹¤.
    return 2 * circle.radius;
  }
};

console.log(circle.getDiameter()); // 10
```
ðŸ’¡ `getDiameter` ë©”ì„œë“œ ë‚´ì—ì„œ ìžì‹ ì´ ì†í•œ ê°ì²´ë¥¼ ê°€ë¦¬í‚¤ëŠ” ì‹ë³„ìž `circle`ì„ ì°¸ì¡°í•˜ê³  ìžˆë‹¤.

ì‹¤í–‰ìˆœì„œ
1. ë³€ìˆ˜ í˜¸ì´ìŠ¤íŒ…ìœ¼ë¡œ `circle` ë³€ìˆ˜ ìƒì„± (ì´ˆê¸°í™” ë˜ëŠ” ê²Œ ì•„ë‹˜)
2. `circle` ë³€ìˆ˜ì— í• ë‹¹ë˜ê¸° ì§ì „ì— ê°ì²´ ë¦¬í„°ëŸ´ì„ í‰ê°€
3. `circle` ê°ì²´ ìƒì„±
4. `circle.getDiameter` === `circle`ë©”ì„œë“œê°€ í˜¸ì¶œë˜ì–´ í•¨ìˆ˜ ëª¸ì²´ê°€ ì‹¤í–‰
5. `getDiameter`ë©”ì„œë“œê°€ ì‹¤í–‰ë  ë•Œ `circle`ì‹ë³„ìžë¥¼ ì°¸ì¡°í•œë‹¤.

`circle.getDiameter();`ì„ í˜¸ì¶œí•˜ëŠ” ì‹œì ì—ëŠ” ì´ë¯¸ `circle` ê°ì²´ê°€ ìƒì„±ë˜ì–´ ìžˆìœ¼ë¯€ë¡œ `circle` ì‹ë³„ìžë¥¼ ì°¸ì¡°í•  ìˆ˜ ìžˆë‹¤.

but ìžì‹ ì´ ì†í•œ ê°ì²´ë¥¼ ìž¬ê·€ì ìœ¼ë¡œ ì°¸ì¡°í•˜ëŠ” ë°©ì‹ì€ ë°”ëžŒì§í•˜ì§€ ì•Šë‹¤.


#### ìƒì„±ìž í•¨ìˆ˜ ë°©ì‹ìœ¼ë¡œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ëŠ” ê²½ìš°
```javascript
function Circle(radius) {
  // ì´ ì‹œì ì—ëŠ” ìƒì„±ìž í•¨ìˆ˜ ìžì‹ ì´ ìƒì„±í•  ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°€ë¦¬í‚¤ëŠ” ì‹ë³„ìžë¥¼ ì•Œ ìˆ˜ ì—†ë‹¤.
  ????.radius = radius;
}

Circle.prototype.getDiameter = function () {
  // ì´ ì‹œì ì—ëŠ” ìƒì„±ìž í•¨ìˆ˜ ìžì‹ ì´ ìƒì„±í•  ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°€ë¦¬í‚¤ëŠ” ì‹ë³„ìžë¥¼ ì•Œ ìˆ˜ ì—†ë‹¤.
  return 2 * ????.radius;
};

// ìƒì„±ìž í•¨ìˆ˜ë¡œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ë ¤ë©´ ë¨¼ì € ìƒì„±ìž í•¨ìˆ˜ë¥¼ ì •ì˜í•´ì•¼ í•œë‹¤.
const circle = new Circle(5);
```

ðŸ©µ ê°ì²´ ë¦¬í„°ëŸ´ì—ì„œ `this`ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°
```javascript
// ê°ì²´ ë¦¬í„°ëŸ´
const circle = {
  radius: 5,
  getDiameter() {
    // thisëŠ” ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œ ê°ì²´ë¥¼ ê°€ë¦¬í‚¨ë‹¤.
    return 2 * this.radius;
  }
};

console.log(circle.getDiameter()); // 10
```

ðŸ’š ìƒì„±ìž í•¨ìˆ˜ì—ì„œ `this`ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°
```javascript
// ìƒì„±ìž í•¨ìˆ˜
function Circle(radius) {
  // thisëŠ” ìƒì„±ìž í•¨ìˆ˜ê°€ ìƒì„±í•  ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°€ë¦¬í‚¨ë‹¤.
  this.radius = radius;
}

Circle.prototype.getDiameter = function () {
  // thisëŠ” ìƒì„±ìž í•¨ìˆ˜ê°€ ìƒì„±í•  ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°€ë¦¬í‚¨ë‹¤.
  return 2 * this.radius;
};

// ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
const circle = new Circle(5);
console.log(circle.getDiameter()); // 10
```

> ðŸ“Œ javaë‚˜ c++ê°™ì€ í´ëž˜ìŠ¤ ê¸°ë°˜ ì–¸ì–´ì—ì„œ thisëŠ” í•­ìƒ í´ëž˜ìŠ¤ê°€ ìƒì„±í•˜ëŠ” ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°€ë¦¬í‚¨ë‹¤.   
> ðŸ“Œ ìžë°”ìŠ¤í¬ë¦½íŠ¸ì˜ thisëŠ” í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ëŠ” ë°©ì‹ì— ë”°ë¼ this ë°”ì¸ë”©ë  ê°’ì´ ë™ì ìœ¼ë¡œ ê²°ì •ëœë‹¤.

```javascript
// thisëŠ” ì–´ë””ì„œë“ ì§€ ì°¸ì¡° ê°€ëŠ¥í•˜ë‹¤.
// ì „ì—­ì—ì„œ thisëŠ” ì „ì—­ ê°ì²´ windowë¥¼ ê°€ë¦¬í‚¨ë‹¤.
console.log(this); // window

function square(number) {
  // ì¼ë°˜ í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ thisëŠ” ì „ì—­ ê°ì²´ windowë¥¼ ê°€ë¦¬í‚¨ë‹¤.
  console.log(this); // window
  return number * number;
}
square(2);

const person = {
  name: 'Lee',
  getName() {
    // ë©”ì„œë“œ ë‚´ë¶€ì—ì„œ thisëŠ” ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œ ê°ì²´ë¥¼ ê°€ë¦¬í‚¨ë‹¤.
    console.log(this); // {name: "Lee", getName: Æ’}
    return this.name;
  }
};
console.log(person.getName()); // Lee

function Person(name) {
  this.name = name;
  // ìƒì„±ìž í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ thisëŠ” ìƒì„±ìž í•¨ìˆ˜ê°€ ìƒì„±í•  ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°€ë¦¬í‚¨ë‹¤.
  console.log(this); // Person {name: "Lee"}
}

const me = new Person('Lee');
```
`this`ëŠ” ê°ì²´ì˜ ë©”ì„œë“œ ë‚´ë¶€ ë˜ëŠ” ìƒì„±ìž í•¨ìˆ˜ ë‚´ë¶€ì—ì„œë§Œ ì˜ë¯¸ê°€ ìžˆë‹¤.

ì¼ë°˜ í•¨ìˆ˜ ë‚´ë¶€ì˜ thisëŠ” `window`ê°€ ë°”ì¸ë”©ë˜ê³ , `strict mode`ì—ì„œëŠ” `undefined`ê°€ ë°”ì¸ë”©ëœë‹¤.(êµ³ì´ í•„ìš”ì—†ì–´ì„œ)

```javascript
(function(){
    'use strict';
    function print(){
      console.log(this);
    }
    print();  // undefined
}())
```

í•˜ì§€ë§Œ ì•„ëž˜ ì²˜ëŸ¼ ê°ì²´ì˜ í”„ë¡œí¼í‹°ë¡œ í•¨ìˆ˜ë¥¼ í• ë‹¹í•˜ë©´ ë©”ì„œë“œê°€ ë˜ì–´`this`ì—ëŠ” ê°ì²´ê°€ ë°”ì¸ë”© ëœë‹¤.

```javascript
(function(){
    'use strict';
    function printThis(){
      console.log(this);
    }
    const obj = {};
    obj.print = printThis;
    obj.print(); // obj: {print: Æ’}
}())
```

## í•¨ìˆ˜ í˜¸ì¶œ ë°©ì‹ê³¼ this ë°”ì¸ë”©
`this` ë°”ì¸ë”©ì€ í•¨ìˆ˜ í˜¸ì¶œ ë°©ì‹, ì¦‰ í•¨ìˆ˜ê°€ ì–´ë–»ê²Œ í˜¸ì¶œë˜ì—ˆëŠ”ì§€ì— ë”°ë¼ ë™ì ìœ¼ë¡œ ê²°ì •ëœë‹¤.

ðŸ“Œ ë ‰ì‹œì»¬ ìŠ¤ì½”í”„ì™€ this ë°”ì¸ë”©ì€ ê²°ì • ì‹œê¸°ê°€ ë‹¤ë¥´ë‹¤.

ë ‰ì‹œì»¬ ìŠ¤ì½”í”„ëŠ” í•¨ìˆ˜ ì •ì˜ê°€ í‰ê°€ë˜ì–´ í•¨ìˆ˜ ê°ì²´ê°€ ìƒì„±ë˜ëŠ” ì‹œì ì— ê²°ì •ëœë‹¤.  
`this`ëŠ” í•¨ìˆ˜ê°€ í˜¸ì¶œì‹œì— ê²°ì •ëœë‹¤.

ðŸ“Œ í•¨ìˆ˜ ê°ì²´ê°€ ìƒì„±ë˜ëŠ” ì‹œì 

í•¨ìˆ˜ ì„ ì–¸ë¬¸ì€ ì½”ë“œ(í•¨ìˆ˜ ì„ ì–¸ë¬¸ì„ í¬í•¨í•œ) í‰ê°€ ë‹¨ê³„ì—ì„œ í•¨ìˆ˜ ê°ì²´ ìƒì„±  
í•¨ìˆ˜ í‘œí˜„ì‹ì€ ì½”ë“œ(í•¨ìˆ˜ í‘œí˜„ì‹ì„ í¬í•¨í•œ) ì‹¤í–‰ ë‹¨ê³„ì—ì„œ í•¨ìˆ˜ ê°ì²´ ìƒì„±


#### í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ë‹¤ì–‘í•œ ë°©ì‹
1. ì¼ë°˜ í•¨ìˆ˜ í˜¸ì¶œ
2. ë©”ì„œë“œ í˜¸ì¶œ
3. ìƒì„±ìž í•¨ìˆ˜ í˜¸ì¶œ 
4. `Function.prototype.apply/call/bind` ë©”ì„œë“œì— ì˜í•œ ê°„ì ‘ í˜¸ì¶œ

```javascript
// this ë°”ì¸ë”©ì€ í•¨ìˆ˜ í˜¸ì¶œ ë°©ì‹ì— ë”°ë¼ ë™ì ìœ¼ë¡œ ê²°ì •ëœë‹¤.
const foo = function () {
  console.dir(this);
};

// ë™ì¼í•œ í•¨ìˆ˜ë„ ë‹¤ì–‘í•œ ë°©ì‹ìœ¼ë¡œ í˜¸ì¶œí•  ìˆ˜ ìžˆë‹¤.

// 1. ì¼ë°˜ í•¨ìˆ˜ í˜¸ì¶œ
// foo í•¨ìˆ˜ë¥¼ ì¼ë°˜ì ì¸ ë°©ì‹ìœ¼ë¡œ í˜¸ì¶œ
// foo í•¨ìˆ˜ ë‚´ë¶€ì˜ thisëŠ” ì „ì—­ ê°ì²´ windowë¥¼ ê°€ë¦¬í‚¨ë‹¤.
foo(); // window

// 2. ë©”ì„œë“œ í˜¸ì¶œ
// foo í•¨ìˆ˜ë¥¼ í”„ë¡œí¼í‹° ê°’ìœ¼ë¡œ í• ë‹¹í•˜ì—¬ í˜¸ì¶œ
// foo í•¨ìˆ˜ ë‚´ë¶€ì˜ thisëŠ” ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œ ê°ì²´ objë¥¼ ê°€ë¦¬í‚¨ë‹¤.
const obj = { foo };
obj.foo(); // obj

// 3. ìƒì„±ìž í•¨ìˆ˜ í˜¸ì¶œ
// foo í•¨ìˆ˜ë¥¼ new ì—°ì‚°ìžì™€ í•¨ê»˜ ìƒì„±ìž í•¨ìˆ˜ë¡œ í˜¸ì¶œ
// foo í•¨ìˆ˜ ë‚´ë¶€ì˜ thisëŠ” ìƒì„±ìž í•¨ìˆ˜ê°€ ìƒì„±í•œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°€ë¦¬í‚¨ë‹¤.
new foo(); // foo {}

// 4. Function.prototype.apply/call/bind ë©”ì„œë“œì— ì˜í•œ ê°„ì ‘ í˜¸ì¶œ
// foo í•¨ìˆ˜ ë‚´ë¶€ì˜ thisëŠ” ì¸ìˆ˜ì— ì˜í•´ ê²°ì •ëœë‹¤.
const bar = { name: 'bar' };

foo.call(bar);   // bar
foo.apply(bar);  // bar
foo.bind(bar)(); // bar
```

### ì¼ë°˜ í•¨ìˆ˜ í˜¸ì¶œ
ì¼ë°˜ í•¨ìˆ˜ë¡œ í˜¸ì¶œí•˜ëŠ” ê²½ìš° ê¸°ë³¸ì ìœ¼ë¡œ `this`ì—ëŠ” ì „ì—­ ê°ì²´ê°€ ë°”ì¸ë”©ëœë‹¤.
```javascript
function foo() {
  console.log("foo's this: ", this);  // window
  function bar() {
    console.log("bar's this: ", this); // window
  }
  bar();
}
foo();
```

`strict mode`ì—ì„œëŠ” `this`ì— `undefined`ê°€ ë°”ì¸ë”©ëœë‹¤.
```javascript
function foo() {
  'use strict';

  console.log("foo's this: ", this);  // undefined
  function bar() {
    console.log("bar's this: ", this); // undefined
  }
  bar();
}
foo();
```

ë©”ì„œë“œ ë‚´ì˜ ì¤‘ì²© í•¨ìˆ˜ë¼ë„ ì¼ë°˜ í•¨ìˆ˜ë¡œ í˜¸ì¶œë˜ë©´ í•¨ìˆ˜ ë‚´ë¶€ì˜ thisì—ëŠ” ì „ì—­ ê°ì²´ê°€ ë°”ì¸ë”©ëœë‹¤.
```javascript
// var í‚¤ì›Œë“œë¡œ ì„ ì–¸í•œ ì „ì—­ ë³€ìˆ˜ valueëŠ” ì „ì—­ ê°ì²´ì˜ í”„ë¡œí¼í‹°ë‹¤.
var value = 1;
// const í‚¤ì›Œë“œë¡œ ì„ ì–¸í•œ ì „ì—­ ë³€ìˆ˜ valueëŠ” ì „ì—­ ê°ì²´ì˜ í”„ë¡œí¼í‹°ê°€ ì•„ë‹ˆë‹¤.
// const value = 1;

const obj = {
  value: 100,
  foo() {
    console.log("foo's this: ", this);  // {value: 100, foo: Æ’}
    console.log("foo's this.value: ", this.value); // 100

    // ë©”ì„œë“œ ë‚´ì—ì„œ ì •ì˜í•œ ì¤‘ì²© í•¨ìˆ˜
    function bar() {
      console.log("bar's this: ", this); // window
      console.log("bar's this.value: ", this.value); // 1
    }

    // ë©”ì„œë“œ ë‚´ì—ì„œ ì •ì˜í•œ ì¤‘ì²© í•¨ìˆ˜ë„ ì¼ë°˜ í•¨ìˆ˜ë¡œ í˜¸ì¶œë˜ë©´ ì¤‘ì²© í•¨ìˆ˜ ë‚´ë¶€ì˜ thisì—ëŠ” ì „ì—­ ê°ì²´ê°€ ë°”ì¸ë”©ëœë‹¤.
    bar();
  }
};

obj.foo();
```

ì½œë°± í•¨ìˆ˜ë„ ì¼ë°˜ í•¨ìˆ˜ë¡œ í˜¸ì¶œë˜ë©´ `this`ì— ì „ì—­ ê°ì²´ê°€ ë°”ì¸ë”©ëœë‹¤.
```javascript
var value = 1;

const obj = {
  value: 100,
  foo() {
    console.log("foo's this: ", this); // {value: 100, foo: Æ’}
    // ì½œë°± í•¨ìˆ˜ ë‚´ë¶€ì˜ thisì—ëŠ” ì „ì—­ ê°ì²´ê°€ ë°”ì¸ë”©ëœë‹¤.
    setTimeout(function () {
      console.log("callback's this: ", this); // window
      console.log("callback's this.value: ", this.value); // 1
    }, 100);
  }
};

obj.foo();
```
ë©”ì„œë“œ ë‚´ë¶€ ì¤‘ì²© í•¨ìˆ˜ë‚˜ ì½œë°± í•¨ìˆ˜ì— `this`ë°”ì¸ë”©ì„ ë©”ì„œë“œì˜ `this`ì™€ ì¼ì¹˜ ì‹œí‚¤ê¸° ìœ„í•œ ë°©ë²•ì€ 3ê°€ì§€ê°€ ìžˆë‹¤.

1. `that`
    ```javascript
   var value = 1;
   
   const obj = {
     value: 100,
     foo() {
       // this ë°”ì¸ë”©(obj)ì„ ë³€ìˆ˜ thatì— í• ë‹¹í•œë‹¤.
       const that = this;
   
       // ì½œë°± í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ this ëŒ€ì‹  thatì„ ì°¸ì¡°í•œë‹¤.
       setTimeout(function () {
         console.log(that.value); // 100
       }, 100);
     }
   };
   
   obj.foo();
   ```
2. `Function.prototype.apply/call/bind`
    ```javascript
   var value = 1;
   
   const obj = {
     value: 100,
     foo() {
       // ì½œë°± í•¨ìˆ˜ì— ëª…ì‹œì ìœ¼ë¡œ thisë¥¼ ë°”ì¸ë”©í•œë‹¤.
       setTimeout(function () {
         console.log(this.value); // 100
       }.bind(this), 100);
     }
   };
   
   obj.foo();
   ```
3. í™”ì‚´í‘œ í•¨ìˆ˜
    ```javascript
   var value = 1;
   
   const obj = {
     value: 100,
     foo() {
       // í™”ì‚´í‘œ í•¨ìˆ˜ ë‚´ë¶€ì˜ thisëŠ” ìƒìœ„ ìŠ¤ì½”í”„ì˜ thisë¥¼ ê°€ë¦¬í‚¨ë‹¤.
       setTimeout(() => console.log(this.value), 100); // 100
     }
   };
   
   obj.foo();
   ```
   